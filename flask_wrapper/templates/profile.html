{% extends "base2.html" %}

{% block content %}


<script>
    bod = document.body
    bod.style.height = "100%"
</script>

<div class="flex min-h-full pb-8 md:py-8 flex-col justify-center">
    <div class="grid grid-cols-3">
  <h1 class="text-lg font-bold text-gray-900 sm:text-2xl block mb-5 dark:text-gray-100">
    Welcome, {{ name }}!
  </h1>
        <div>
      {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
            {% if category == "success" %}
            <div class="group relative flex w-full justify-center rounded-md border border-transparent bg-green-100 py-2 px-3 text-sm font-medium text-green-700">
                {{message}}
            </div>
            {% else %}
            <div class="group relative flex w-full justify-center rounded-md border border-transparent bg-red-100 py-2 px-3 text-sm font-medium text-red-700">
                {{message}}
            </div>
            {% endif %}
        {% endfor %}
      {% endif %}
      {% endwith %}
        </div>
    </div>
<div class="flex lg:flex-row flex-col pt-6">
    <div class="lg:w-2/6 pr-3 mb-3">
        <span class="text-base font-bold text-gray-900 sm:text-lg block mb-5 dark:text-gray-100">
            Your Profile
        </span>
        <span class="text-base font-medium text-gray-500 dark:text-gray-300">
            Update your profile information here.
        </span>
    </div>
<div class="bg-white dark:bg-gray-700 shadow rounded-2xl px-10 py-10 lg:w-4/6 align-end backdrop-blur-md bg-opacity-80 border border-gray-100 dark:border-gray-900">
<form method="post" action="/update_profile">
  <div class="relative">
      <span class="text-sm font-medium text-gray-500 block mb-2 dark:text-gray-300">Name</span>
      <div class="flex flex-row">
          <label for="name" class="sr-only">Name</label>
      <input id="name" name="name" type="text" required class="dark:bg-gray-600 relative block w-full appearance-none rounded-l-lg border border-gray-300 px-2 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-500 focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 text-sm md:text-base" placeholder="Name" value="{{name}}">
            <button type="submit" class="group relative flex justify-center rounded-r-lg w-60 border border-transparent bg-indigo-200 dark:bg-indigo-300 py-2 px-3 text-xs md:text-sm font-medium items-center text-indigo-900 hover:bg-indigo-300">Update name</button>
      </div>
</div>
</form>
<form method="post" action="/update_profile" class="w-full">
    <div class="relative py-10 w-full">
        <span class="text-sm font-medium text-gray-500 block mb-2 dark:text-gray-300">E-mail</span>
        <div class="flex flex-row">
        <label for="email" class="sr-only">Email address</label>
        <input id="email" name="email" type="email" required class="dark:bg-gray-600 relative block w-full appearance-none rounded-l-lg border border-gray-300 px-2 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-500 focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 text-sm md:text-base invalid:border-red-500 invalid:text-red-500 focus:invalid:border-red-500" placeholder="E-mail" value="{{email}}">
    <button type="submit" class="group relative flex justify-center rounded-r-lg w-60 border border-transparent bg-indigo-200 dark:bg-indigo-300 py-2 px-3 text-xs md:text-sm items-center font-medium text-indigo-900 hover:bg-indigo-300">Update email</button>
            </div>
   </div>
</form>
<form method="post" action="/update_profile">
   <div class="relative">
       <div class="flex flex-col w-full">
           <span class="text-sm font-medium text-gray-500 block mb-2 dark:text-gray-300">Change Password</span>
       <div class="flex flex-row">
              <label for="password" class="sr-only">Password</label>
              <input id="password" name="password" type="password" autocomplete="current-password" required class="dark:bg-gray-600 relative block mb-2 w-full appearance-none rounded-lg border border-gray-300 px-2 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-500 focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 text-sm md:text-base" placeholder="Old password" value="">
            <div class="w-60 ml-1.5"></div>
      </div>
           <div class="flex flex-row">
              <label for="password_new" class="sr-only">Password</label>
              <input id="password_new" name="password_new" type="password" required class="dark:bg-gray-600 relative block w-full justify-center appearance-none rounded-l-lg border border-gray-300 px-2 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-300 dark:placeholder-gray-500 focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 text-sm md:text-base" placeholder="New password" value="">
             <button type="submit" class="group relative flex justify-center rounded-r-lg w-60 border border-transparent bg-indigo-200 dark:bg-indigo-300 py-2 px-3 text-xs md:text-sm items-center font-medium text-indigo-900 hover:bg-indigo-300">
            Update password
            </button>
           </div>
      </div>
    </div>
</form>
</div>
</div>

<div class="flex lg:flex-row flex-col pt-10">
    <div class="lg:w-2/6 pr-3 m-b-3">
        <span class="text-base font-bold text-gray-900 sm:text-lg block mb-5 dark:text-gray-100">
            Remaining Analyses
        </span>
        <span class="text-base font-medium text-gray-500 dark:text-gray-300">
            To add more analyses you will be redirected to our payment partner.
        </span>
    </div>

<div class="rounded-2xl lg:w-4/6 align-end flex flex-col 2xl:flex-row justify-between">
    <span class="dark:bg-gray-700 dark:border-gray-900 text-9xl text-font-bold text-indigo-700 dark:text-indigo-500 bg-white shadow rounded-2xl py-5 px-10 max-w-content 2xl:mr-6 mt-2 items-center flex justify-center backdrop-blur-md bg-opacity-60 border border-gray-100">
        {% if current_user.unlimited %}
        ∞
        {% else %}
            {{current_user.n_analyses}}
        {% endif %}
    </span>
    <div class="flex flex-col justify-center items-center w-full">
            <span class="font-medium text-sm bg-indigo-700 dark:bg-indigo-500 rounded-full text-white px-3 text-center -mb-4 py-1 z-10 mt-3 2xl:mt-0">Get more</span>
    <div class="flex justify-between flex-end justify-end border-indigo-700 dark:border-indigo-500 rounded-2xl border-4 py-5 px-5 flex-col md:flex-row w-full gap-3">
    <div class="dark:bg-gray-700 dark:border-gray-900 bg-white shadow h-full rounded-xl py-5 px-5 w-full backdrop-blur-md bg-opacity-60 border border-gray-100">
        <div class="flex flex-col h-full">
            <span class="text-lg font-bold text-indigo-700 sm:text-lg block mb-1 dark:text-indigo-500">
                Starter
            </span>

            <span class="text-sm text-gray-500 font-bold dark:text-gray-300">
                2 Analyses
            </span>
            <span class="text-xs text-gray-500 mb-4 dark:text-gray-300">
                One time payment
            </span>

            <span class="font-medium text-gray-900 text-2xl block dark:text-gray-300">
                2€
            </span>

            <a href="payment/starter/payment" class="inline-flex items-center mt-8 w-full justify-center whitespace-nowrap rounded-lg border border-transparent bg-indigo-200 dark:bg-indigo-300 px-3 py-2 text-base font-medium text-indigo-900 shadow-sm hover:bg-indigo-300">Buy</a>
        </div>
    </div>

        <div class="dark:bg-gray-700 dark:border-gray-900 bg-white shadow h-full rounded-xl py-5 px-5 w-full backdrop-blur-md bg-opacity-60 border border-gray-100">
        <div class="flex flex-col h-full">
            <span class="text-lg font-bold text-indigo-700 sm:text-lg block mb-1 dark:text-indigo-500">
                Essential
            </span>

            <span class="text-sm text-gray-500 font-bold dark:text-gray-300">
                5 Analyses
            </span>

            <span class="text-xs text-gray-500 mb-4 dark:text-gray-300">
                One time payment
            </span>

            <span class="font-medium text-gray-900 text-2xl block dark:text-gray-300">
                5€
            </span>

            <a href="/payment/essential/payment" class="inline-flex items-center mt-8 w-full justify-center whitespace-nowrap rounded-lg border border-transparent bg-indigo-200 dark:bg-indigo-300 px-3 py-2 text-base font-medium text-indigo-900 shadow-sm hover:bg-indigo-300">Buy</a>
        </div>
    </div>

        <div class="dark:bg-gray-700 dark:border-gray-900 bg-white shadow h-full rounded-xl py-5 px-5 w-full backdrop-blur-md bg-opacity-60 border border-gray-100">
        <div class="flex flex-col h-full">
            <span class="text-lg font-bold text-indigo-700 sm:text-lg block mb-1 dark:text-indigo-500">
                Professional
            </span>

            <span class="text-sm text-gray-500 font-bold dark:text-gray-300">
                Unlimited Analyses
            </span>

            <span class="text-xs text-gray-500 mb-4 dark:text-gray-300">
                Subscription
            </span>

            <div class="flex flex-row items-baseline">
                <span class="font-medium text-gray-900 text-2xl block dark:text-gray-300">
                    10€
                </span>
                <span class="font-medium text-gray-500 text-base block ml-1 dark:text-gray-400">
                    /month
                </span>
            </div>

            <a href="payment/professional/subscription" class="inline-flex items-center mt-8 w-full justify-center whitespace-nowrap rounded-lg border border-transparent bg-indigo-200 dark:bg-indigo-300 px-3 py-2 text-base font-medium text-indigo-900 shadow-sm hover:bg-indigo-300">Subscribe</a>
        </div>
    </div>
        </div>
</div>
</div>

</div>
    <a href="{{ url_for('auth.delete_profile') }}" class="inline-flex items-center w-40 mt-10 justify-center whitespace-nowrap rounded-lg border border-transparent bg-red-200 px-3 py-2 text-base font-medium text-red-900 shadow-sm hover:bg-red-300">Delete account</a>
<!--    <a href="{{ url_for('auth.test') }}" class="inline-flex items-center w-40 mt-10 justify-center whitespace-nowrap rounded-lg border border-transparent bg-indigo-200 px-3 py-2 text-base font-medium text-indigo-900 shadow-sm hover:bg-indigo-300">Test</a>-->
</div>
{% endblock %}
